{"ast":null,"code":"import { CART_ACTION_TYPES } from \"./cart.types\";\nimport { createAction } from \"../../../utils/reducer/reducer.utils\";\n\nconst addCartItem = (cartItems, productToAdd) => {\n  // 如果cartItems包含productToAdd，找到\n  const existCartItem = cartItems.find(cartItem => cartItem.id === productToAdd.id); // 如果找到，增加数量\n\n  if (existCartItem) {\n    return cartItems.map(cartItem => cartItem.id === productToAdd.id ? { ...cartItem,\n      quantity: cartItem.quantity + 1\n    } : cartItem);\n  } // return 新数组（new cartitem）\n\n\n  return [...cartItems, { ...productToAdd,\n    quantity: 1\n  }];\n};\n\nconst subCartItem = (cartItems, cartItemToSub) => {\n  //找到要移除的cartitem\n  const existCartItem = cartItems.find(cartItem => cartItem.id === cartItemToSub.id); // 检查数量是否为1，是就移除\n\n  if (existCartItem.quantity === 1) {\n    return cartItems.filter(cartItem => cartItem.id !== cartItemToSub.id);\n  } // 减少个数，返回数组\n\n\n  if (existCartItem) {\n    return cartItems.map(cartItem => cartItem.id === cartItemToSub.id ? { ...cartItem,\n      quantity: cartItem.quantity - 1\n    } : cartItem);\n  }\n};\n\nconst clearCartItem = (cartItems, cartItemToClear) => cartItems.filter(cartItem => cartItem.id !== cartItemToClear.id);\n\nexport const setIsCartOpen = boolean => createAction(CART_ACTION_TYPES.setIsCartOpen, boolean);\nexport const addItemToCart = (cartItems, productToAdd) => {\n  const newCartItems = setCartItems(addCartItem(cartItems, productToAdd));\n  return createAction(CART_ACTION_TYPES.SET_CART_ITEMS, newCartItems);\n};\nexport const subItemFromCart = (cartItems, cartItemFromSub) => {\n  const newCartItems = setCartItems(subCartItem(cartItems, cartItemFromSub));\n  return createAction(CART_ACTION_TYPES.SET_CART_ITEMS, newCartItems);\n};\nexport const clearItemFromCart = (cartItems, cartItemToClear) => {\n  const newCartItems = setCartItems(clearCartItem(cartItems, cartItemToClear));\n  return createAction(CART_ACTION_TYPES.SET_CART_ITEMS, newCartItems);\n};","map":{"version":3,"names":["CART_ACTION_TYPES","createAction","addCartItem","cartItems","productToAdd","existCartItem","find","cartItem","id","map","quantity","subCartItem","cartItemToSub","filter","clearCartItem","cartItemToClear","setIsCartOpen","boolean","addItemToCart","newCartItems","setCartItems","SET_CART_ITEMS","subItemFromCart","cartItemFromSub","clearItemFromCart"],"sources":["/home/axun/React/shopping/src/components/store/cart/cart.action.js"],"sourcesContent":["import { CART_ACTION_TYPES } from \"./cart.types\";\nimport { createAction } from \"../../../utils/reducer/reducer.utils\";\n\nconst addCartItem = (cartItems, productToAdd) => {\n    // 如果cartItems包含productToAdd，找到\n    const existCartItem = cartItems.find((cartItem) => cartItem.id === productToAdd.id)\n\n    // 如果找到，增加数量\n    if (existCartItem) {\n        return cartItems.map((cartItem) => cartItem.id === productToAdd.id \n            ? {...cartItem, quantity: cartItem.quantity + 1}\n            : cartItem\n        )\n    }\n\n    // return 新数组（new cartitem）\n    return [...cartItems, { ...productToAdd, quantity:1 }]\n}\n\nconst subCartItem = (cartItems, cartItemToSub) => {\n    //找到要移除的cartitem\n    const existCartItem = cartItems.find((cartItem) => cartItem.id === cartItemToSub.id)\n\n    // 检查数量是否为1，是就移除\n    if (existCartItem.quantity === 1) {\n        return cartItems.filter(cartItem => cartItem.id !== cartItemToSub.id)\n    } \n\n    // 减少个数，返回数组\n    if (existCartItem) {\n        return cartItems.map((cartItem) => cartItem.id === cartItemToSub.id \n            ? {...cartItem, quantity: cartItem.quantity - 1}\n            : cartItem\n        )\n    }\n}\n\nconst clearCartItem = (cartItems, cartItemToClear) => cartItems.filter(cartItem => cartItem.id !== cartItemToClear.id)\n\n\nexport const setIsCartOpen = (boolean) => \n    createAction(CART_ACTION_TYPES.setIsCartOpen, boolean)\n\nexport const addItemToCart = (cartItems, productToAdd) => {\n    const newCartItems = setCartItems(addCartItem(cartItems, productToAdd))\n    return createAction(CART_ACTION_TYPES.SET_CART_ITEMS, newCartItems)\n}\n\nexport const subItemFromCart = (cartItems, cartItemFromSub) => {\n    const newCartItems = setCartItems(subCartItem(cartItems, cartItemFromSub))\n    return createAction(CART_ACTION_TYPES.SET_CART_ITEMS, newCartItems)\n}\n\n\nexport const clearItemFromCart = (cartItems, cartItemToClear) => {\n    const newCartItems = setCartItems(clearCartItem(cartItems, cartItemToClear))\n    return createAction(CART_ACTION_TYPES.SET_CART_ITEMS, newCartItems)\n}"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,cAAlC;AACA,SAASC,YAAT,QAA6B,sCAA7B;;AAEA,MAAMC,WAAW,GAAG,CAACC,SAAD,EAAYC,YAAZ,KAA6B;EAC7C;EACA,MAAMC,aAAa,GAAGF,SAAS,CAACG,IAAV,CAAgBC,QAAD,IAAcA,QAAQ,CAACC,EAAT,KAAgBJ,YAAY,CAACI,EAA1D,CAAtB,CAF6C,CAI7C;;EACA,IAAIH,aAAJ,EAAmB;IACf,OAAOF,SAAS,CAACM,GAAV,CAAeF,QAAD,IAAcA,QAAQ,CAACC,EAAT,KAAgBJ,YAAY,CAACI,EAA7B,GAC7B,EAAC,GAAGD,QAAJ;MAAcG,QAAQ,EAAEH,QAAQ,CAACG,QAAT,GAAoB;IAA5C,CAD6B,GAE7BH,QAFC,CAAP;EAIH,CAV4C,CAY7C;;;EACA,OAAO,CAAC,GAAGJ,SAAJ,EAAe,EAAE,GAAGC,YAAL;IAAmBM,QAAQ,EAAC;EAA5B,CAAf,CAAP;AACH,CAdD;;AAgBA,MAAMC,WAAW,GAAG,CAACR,SAAD,EAAYS,aAAZ,KAA8B;EAC9C;EACA,MAAMP,aAAa,GAAGF,SAAS,CAACG,IAAV,CAAgBC,QAAD,IAAcA,QAAQ,CAACC,EAAT,KAAgBI,aAAa,CAACJ,EAA3D,CAAtB,CAF8C,CAI9C;;EACA,IAAIH,aAAa,CAACK,QAAd,KAA2B,CAA/B,EAAkC;IAC9B,OAAOP,SAAS,CAACU,MAAV,CAAiBN,QAAQ,IAAIA,QAAQ,CAACC,EAAT,KAAgBI,aAAa,CAACJ,EAA3D,CAAP;EACH,CAP6C,CAS9C;;;EACA,IAAIH,aAAJ,EAAmB;IACf,OAAOF,SAAS,CAACM,GAAV,CAAeF,QAAD,IAAcA,QAAQ,CAACC,EAAT,KAAgBI,aAAa,CAACJ,EAA9B,GAC7B,EAAC,GAAGD,QAAJ;MAAcG,QAAQ,EAAEH,QAAQ,CAACG,QAAT,GAAoB;IAA5C,CAD6B,GAE7BH,QAFC,CAAP;EAIH;AACJ,CAhBD;;AAkBA,MAAMO,aAAa,GAAG,CAACX,SAAD,EAAYY,eAAZ,KAAgCZ,SAAS,CAACU,MAAV,CAAiBN,QAAQ,IAAIA,QAAQ,CAACC,EAAT,KAAgBO,eAAe,CAACP,EAA7D,CAAtD;;AAGA,OAAO,MAAMQ,aAAa,GAAIC,OAAD,IACzBhB,YAAY,CAACD,iBAAiB,CAACgB,aAAnB,EAAkCC,OAAlC,CADT;AAGP,OAAO,MAAMC,aAAa,GAAG,CAACf,SAAD,EAAYC,YAAZ,KAA6B;EACtD,MAAMe,YAAY,GAAGC,YAAY,CAAClB,WAAW,CAACC,SAAD,EAAYC,YAAZ,CAAZ,CAAjC;EACA,OAAOH,YAAY,CAACD,iBAAiB,CAACqB,cAAnB,EAAmCF,YAAnC,CAAnB;AACH,CAHM;AAKP,OAAO,MAAMG,eAAe,GAAG,CAACnB,SAAD,EAAYoB,eAAZ,KAAgC;EAC3D,MAAMJ,YAAY,GAAGC,YAAY,CAACT,WAAW,CAACR,SAAD,EAAYoB,eAAZ,CAAZ,CAAjC;EACA,OAAOtB,YAAY,CAACD,iBAAiB,CAACqB,cAAnB,EAAmCF,YAAnC,CAAnB;AACH,CAHM;AAMP,OAAO,MAAMK,iBAAiB,GAAG,CAACrB,SAAD,EAAYY,eAAZ,KAAgC;EAC7D,MAAMI,YAAY,GAAGC,YAAY,CAACN,aAAa,CAACX,SAAD,EAAYY,eAAZ,CAAd,CAAjC;EACA,OAAOd,YAAY,CAACD,iBAAiB,CAACqB,cAAnB,EAAmCF,YAAnC,CAAnB;AACH,CAHM"},"metadata":{},"sourceType":"module"}